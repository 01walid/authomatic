{% extends 'base.html' %}

{% macro providers(providers) %}
	<ul class="small-block-grid-1 large-block-grid-3">
	{% for k, v in providers %}
		{% set name = v._name or k|capitalize %}
		<li>
			<a class="authomatic provider-button {{ k }}" href="login/{{ k }}">
				{{ name }} <img src="{{ v._icon }}" />
			</a>
		</li>
	{% endfor %}
	</ul>
{% endmacro %}

{% macro form(url) %}
	<form class="authomatic" action="login/{{ url }}">
		<div class="row collapse">
			<div class="large-7 small-8 columns">
				<input type="text" name="id" placeholder="Your claimed ID">
			</div>
			<div class="large-5 small-4 columns">
				<input type="submit" class="button postfix radius" value="Authenticate" />
			</div>
		</div>
	</form>
{% endmacro %}

{% block scripts %}

<script type="text/javascript" src="static/js/authomatic.js"></script>

{% endblock %}

{% block body %}
<div id="header">
	<div class="row">
		<div class="large-12 columns">
			<img id="logo" src="static/img/dark-horizontal.svg" />
		</div>
	</div>
</div>

<div id="sub-header">
	<div class="row">
		<p id="motto">
			Example of the Authomatic Python library.
		</p>
	</div>
</div>

<div id="user" class="hidden">
	<div class="row">
		<div class="small-8 columns info">
			<h1>Hi <span id="user-name"></span></h1>
			<h5>You are logged in with</h5>
			<h3><span id="user-provider"></span></h3>
			<h5>Your email is</h5>
			<h3><span id="user-email"></span></h3>
			<h5>Your ID is</h5>
			<h3><span id="user-id"></span></h3>
		</div>
		<div class="small-4 columns">
			<img id="user-picture" />
		</div>
	</div>
	<div class="row">
		<div class="large-12 columns">
			<div id="user-apis"></div>
			<div id="user-data-wrapper">
				<div id="user-data-loader" class="hidden">Loading ...</div>
				<pre id="user-data" class="prettyprint"></pre>
			</div>
		</div>
	</div>
</div>

<div id="error" class="hidden">
	<div class="row">
		<div class="large-12 columns">
			Error: <span id="error-message"></span>
		</div>
	</div>
</div>

<div class="row">
	<div class="large-12 columns">
		<h1>Authentication</h1>
	</div>
</div>

<div class="row">
	<div class="large-4 columns">
		<h3>OpenID</h3>
		{{ form('openid') }}
	</div>
	<div class="large-4 columns">
		<h3>GAE OpenID</h3>
		{{ form('gae-openid') }}
	</div>
	<div class="large-4 columns">
		<h3>Mozilla Persona</h3>
		{{ form('persona') }}
	</div>
</div>

<div class="row">
	<div class="large-12 columns">
		<h1>Authorisation</h1>
	</div>
</div>

<div class="row">
	<div class="small-6 columns">
		<h3>OAuth 1.0a</h3>
		{{ providers(oauth1) }}
	</div>
	<div class="small-6 columns">
		<h3>OAuth 2.0</h3>
		{{ providers(oauth2) }}
	</div>
</div>
{% endblock %}
{% block script %}
{% endblock %}